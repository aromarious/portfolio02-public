-- システム構築要素実装マトリックス INSERT文
-- Generated from system-construction-implementation-matrix.md

-- system_construction_matrixテーブルを再作成（DuckDB用）
DROP TABLE IF EXISTS system_construction_matrix;
DROP SEQUENCE IF EXISTS system_construction_matrix_seq;

CREATE SEQUENCE system_construction_matrix_seq START 1;

CREATE TABLE system_construction_matrix (
  id INTEGER PRIMARY KEY DEFAULT nextval('system_construction_matrix_seq'),
  category VARCHAR,
  item VARCHAR,
  necessity VARCHAR,
  completion VARCHAR,
  remarks VARCHAR,
  consideration VARCHAR
);
                                   
-- 1. ビジネス要件定義
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('ビジネス要件定義', 'ステークホルダー分析', '△', '○', '個人プロジェクト：採用担当者・エンドユーザー分析済み', ''),
('ビジネス要件定義', 'ビジネスケース作成', '△', '○', '技術力アピール・採用活動支援として明確化', ''),
('ビジネス要件定義', 'ROI/費用対効果分析', '×', '－', '個人ポートフォリオには不適用', ''),
('ビジネス要件定義', '成功指標（KPI）定義', '△', '○', '問い合わせ数・採用面談獲得数として設定', ''),
('ビジネス要件定義', '機能要件定義', '○', '○', 'ContactForm・ポートフォリオ表示・技術アピール', ''),
('ビジネス要件定義', '非機能要件定義', '○', '○', 'パフォーマンス・セキュリティ・ユーザビリティ', ''),
('ビジネス要件定義', '制約条件の特定', '○', '○', '予算・時間・技術スタック制約を明確化', ''),
('ビジネス要件定義', 'ユースケース設計', '○', '○', '採用担当者・エンドユーザー・管理者視点で設計', ''),
('ビジネス要件定義', 'スコープ定義', '○', '○', 'MVP→段階的機能追加で明確化', ''),
('ビジネス要件定義', 'タイムライン策定', '△', '○', '個人開発ペースで柔軟に設定', ''),
('ビジネス要件定義', 'リスクアセスメント', '△', '○', '技術的リスク・運用リスクを評価', ''),
('ビジネス要件定義', '予算計画', '×', '－', '個人プロジェクトのため不要', '');

-- 2. アーキテクチャ設計
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('アーキテクチャ設計', 'アーキテクチャパターン選定', '○', '○', 'モノリス（T3 Stack）で適切なスケール', ''),
('アーキテクチャ設計', 'システム間連携設計', '○', '○', 'Notion・Slack・Redis連携を設計', ''),
('アーキテクチャ設計', 'イベント駆動アーキテクチャ', '×', '－', '単純なフォーム処理には過剰', ''),
('アーキテクチャ設計', 'ドメイン駆動設計（DDD）', '○', '○', 'Contact・Person・Securityドメイン分離', ''),
('アーキテクチャ設計', 'フロントエンド選定', '○', '○', 'Next.js 15 + React 19 + TypeScript', ''),
('アーキテクチャ設計', 'バックエンド選定', '○', '○', 'tRPC v11 + Node.js + TypeScript', ''),
('アーキテクチャ設計', 'データベース選定', '○', '○', 'PostgreSQL + Drizzle ORM', ''),
('アーキテクチャ設計', 'インフラ選定', '○', '○', 'Vercel + Redis + Docker', ''),
('アーキテクチャ設計', 'API設計原則', '○', '○', 'tRPC による型安全API設計', ''),
('アーキテクチャ設計', 'API Gateway戦略', '×', '－', '単一アプリケーションのため不要', ''),
('アーキテクチャ設計', 'バージョニング戦略', '△', '○', 'パッケージバージョン管理で対応', ''),
('アーキテクチャ設計', '認証・認可設計', '○', '○', 'better-auth + Discord OAuth', ''),
('アーキテクチャ設計', 'データモデリング', '○', '○', 'Contact・Person・Security entity設計', ''),
('アーキテクチャ設計', 'データフロー設計', '○', '○', 'フォーム→DB→外部サービス同期フロー', ''),
('アーキテクチャ設計', 'イベントストリーミング', '×', '－', '単純なフォーム処理には過剰', ''),
('アーキテクチャ設計', 'データレイク/データメッシュ', '×', '－', '個人サイトには不適用', '');

-- 3. 非機能要件実装
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('非機能要件実装', 'レスポンス時間要件', '○', '○', 'P95 < 2秒を達成（66%高速化）', ''),
('非機能要件実装', 'スループット要件', '△', '○', '個人サイト規模で十分な処理能力', ''),
('非機能要件実装', '並行処理・非同期処理', '○', '○', 'waitUntil + Promise.all実装', ''),
('非機能要件実装', 'キャッシング戦略', '○', '○', 'Redis + Vercel Edge Cache', ''),
('非機能要件実装', 'データベース最適化', '○', '○', 'インデックス・クエリ最適化', ''),
('非機能要件実装', 'SLA定義', '×', '－', '個人サイトには過剰', ''),
('非機能要件実装', '冗長化設計', '△', '○', 'Vercel自動冗長化を活用', ''),
('非機能要件実装', 'サーキットブレーカー', '○', '○', '外部サービス連携で実装', ''),
('非機能要件実装', 'グレースフルデグラデーション', '○', '○', '外部サービス障害時の段階的機能低下', ''),
('非機能要件実装', 'カオスエンジニアリング', '×', '－', '個人プロジェクトには不適用', ''),
('非機能要件実装', '自動スケーリング', '○', '○', 'Vercel自動スケーリング活用', ''),
('非機能要件実装', 'データベースシャーディング', '×', '－', '個人サイトデータ量には不要', ''),
('非機能要件実装', '読み書き分離', '×', '－', '単一DBで十分', ''),
('非機能要件実装', 'エッジコンピューティング', '○', '○', 'Vercel Edge Functions活用', ''),
('非機能要件実装', 'ゼロトラストアーキテクチャ', '△', '○', '認証・認可・暗号化で部分実装', ''),
('非機能要件実装', '認証・認可システム', '○', '○', 'better-auth + Discord OAuth', ''),
('非機能要件実装', 'データ暗号化', '○', '○', 'HTTPS + DB暗号化', ''),
('非機能要件実装', 'セキュリティヘッダー', '○', '○', 'Next.js設定で実装', ''),
('非機能要件実装', 'OWASP Top 10対策', '○', '○', 'SQL Injection・XSS・CSRF対策', ''),
('非機能要件実装', 'ペネトレーションテスト', '×', '－', '個人プロジェクトには過剰', ''),
('非機能要件実装', '分散トレーシング', '×', '－', '単一アプリケーションのため不要', ''),
('非機能要件実装', 'メトリクス収集', '○', '○', 'Vercel Analytics + カスタムメトリクス', ''),
('非機能要件実装', '構造化ログ設計', '○', '○', 'Winston + 構造化ログ', ''),
('非機能要件実装', 'APMツール導入', '△', '○', 'Vercel Speed Insights活用', ''),
('非機能要件実装', 'SLI/SLO定義', '×', '－', '個人サイトには過剰', '');

-- 4. 開発プロセスと基盤
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('開発プロセスと基盤', '開発環境構築自動化', '○', '○', 'Docker + pnpm scripts', ''),
('開発プロセスと基盤', 'コンテナ化', '○', '○', 'Docker + PostgreSQL', ''),
('開発プロセスと基盤', 'Infrastructure as Code', '○', '○', 'Vercel設定 + Docker Compose', ''),
('開発プロセスと基盤', '環境分離', '○', '○', '開発・テスト・本番環境', ''),
('開発プロセスと基盤', 'ソースコード管理', '○', '○', 'Git + GitHub + ブランチ保護', ''),
('開発プロセスと基盤', 'ビルド自動化', '○', '○', 'Turbo + GitHub Actions', ''),
('開発プロセスと基盤', 'テスト自動化', '○', '○', '416テスト（Unit・Integration・E2E）', ''),
('開発プロセスと基盤', 'セキュリティスキャン', '○', '○', 'npm audit + 依存関係監視', ''),
('開発プロセスと基盤', 'アーティファクト管理', '○', '○', 'Vercel + Docker Registry', ''),
('開発プロセスと基盤', 'デプロイメント戦略', '○', '○', 'Vercel Preview + Production', ''),
('開発プロセスと基盤', 'コード品質管理', '○', '○', 'Biome + TypeScript + ESLint', ''),
('開発プロセスと基盤', 'テストカバレッジ', '○', '○', 'Vitest coverage reports', ''),
('開発プロセスと基盤', 'コードレビュー', '△', '○', '個人開発：自己レビュー + 自動チェック', ''),
('開発プロセスと基盤', '技術負債管理', '○', '○', '定期的なリファクタリング', ''),
('開発プロセスと基盤', 'コーディング規約', '○', '○', 'TypeScript + Prettier設定', ''),
('開発プロセスと基盤', 'Git コミット規約', '○', '○', 'Conventional Commits + Commitlint', ''),
('開発プロセスと基盤', 'ドキュメンテーション', '○', '○', 'README + CLAUDE.md + 技術ドキュメント', ''),
('開発プロセスと基盤', 'エラーハンドリング標準', '○', '○', '統一的なエラーハンドリング戦略', '');

-- 5. データ管理とガバナンス
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('データ管理とガバナンス', 'データモデリング', '○', '○', 'ER図・論理設計・物理設計', ''),
('データ管理とガバナンス', 'マスターデータ管理', '△', '○', 'Person・Contact の重複排除', ''),
('データ管理とガバナンス', 'データライフサイクル', '△', '○', '問い合わせデータの保持期間設定', ''),
('データ管理とガバナンス', 'データアーカイブ', '×', '－', '個人サイトデータ量には不要', ''),
('データ管理とガバナンス', 'データ品質指標', '○', '○', 'バリデーション・整合性チェック', ''),
('データ管理とガバナンス', 'データ検証ルール', '○', '○', 'Zod schema による厳密な検証', ''),
('データ管理とガバナンス', 'データクレンジング', '○', '○', '入力データの正規化・検証', ''),
('データ管理とガバナンス', 'データ監査証跡', '○', '○', '作成・更新日時・IP記録', ''),
('データ管理とガバナンス', 'データ分類とラベリング', '△', '○', '個人情報・業務情報の分類', ''),
('データ管理とガバナンス', 'アクセス制御', '○', '○', '認証・認可による制御', ''),
('データ管理とガバナンス', 'データマスキング', '△', '○', '開発環境でのダミーデータ使用', ''),
('データ管理とガバナンス', '監査ログ', '○', '○', 'アクセス・変更ログ記録', ''),
('データ管理とガバナンス', '移行戦略', '×', '－', '新規開発のため不要', ''),
('データ管理とガバナンス', 'データ変換ルール', '×', '－', '新規開発のため不要', ''),
('データ管理とガバナンス', '移行検証計画', '×', '－', '新規開発のため不要', ''),
('データ管理とガバナンス', 'ロールバック計画', '○', '○', 'Git + Database migration rollback', '');

-- 6. 運用とサポート
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('運用とサポート', '監視項目定義', '○', '○', 'Vercel Analytics + エラー監視', ''),
('運用とサポート', 'アラートルール', '○', '○', 'エラー発生・パフォーマンス劣化時', ''),
('運用とサポート', 'エスカレーション手順', '×', '－', '個人運用のため不要', ''),
('運用とサポート', 'ダッシュボード設計', '○', '○', 'Vercel Dashboard + カスタムメトリクス', ''),
('運用とサポート', 'インシデント分類', '△', '○', '障害レベル・対応優先度設定', ''),
('運用とサポート', '対応手順書', '○', '○', '障害対応・復旧手順書', ''),
('運用とサポート', '根本原因分析', '○', '○', 'ログ分析・エラートレーシング', ''),
('運用とサポート', 'ポストモーテム文化', '△', '○', '個人学習として障害振り返り', ''),
('運用とサポート', '変更要求プロセス', '△', '○', 'Git workflow + 個人判断', ''),
('運用とサポート', '変更諮問委員会', '×', '－', '個人プロジェクトには不要', ''),
('運用とサポート', 'リスク評価', '○', '○', '変更影響度・テスト要否判断', ''),
('運用とサポート', 'ロールバック計画', '○', '○', 'Git revert + Vercel rollback', ''),
('運用とサポート', 'リソース使用率監視', '○', '○', 'Vercel usage monitoring', ''),
('運用とサポート', '成長予測', '△', '○', 'トラフィック・ストレージ予測', ''),
('運用とサポート', 'キャパシティプランニング', '△', '○', 'Vercel scaling limits確認', ''),
('運用とサポート', 'コスト最適化', '○', '○', 'Vercel無料枠内での運用', '');

-- 7. コンプライアンスとガバナンス
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('コンプライアンスとガバナンス', 'GDPR/CCPA対応', '△', '○', '個人情報取扱い・削除権対応', ''),
('コンプライアンスとガバナンス', '業界固有規制', '×', '－', '個人サイトには不適用', ''),
('コンプライアンスとガバナンス', 'データレジデンシー', '△', '○', '日本リージョンでの運用', ''),
('コンプライアンスとガバナンス', '監査要件', '×', '－', '個人プロジェクトには不要', ''),
('コンプライアンスとガバナンス', 'セキュリティポリシー', '○', '○', 'セキュリティ対策・運用方針', ''),
('コンプライアンスとガバナンス', 'アクセス管理プロセス', '○', '○', '認証・認可・権限管理', ''),
('コンプライアンスとガバナンス', '脆弱性管理', '○', '○', '依存関係監視・パッチ適用', ''),
('コンプライアンスとガバナンス', 'セキュリティトレーニング', '×', '－', '個人開発者のため不要', ''),
('コンプライアンスとガバナンス', 'リスクアセスメント', '○', '○', 'セキュリティ・運用リスク評価', ''),
('コンプライアンスとガバナンス', 'リスク軽減策', '○', '○', 'バックアップ・冗長化・監視', ''),
('コンプライアンスとガバナンス', '事業継続計画', '×', '－', '個人サイトには過剰', ''),
('コンプライアンスとガバナンス', '災害復旧計画', '△', '○', 'バックアップ・復旧手順', ''),
('コンプライアンスとガバナンス', 'ベンダー評価基準', '△', '○', 'Vercel・外部サービス評価', ''),
('コンプライアンスとガバナンス', 'SLA管理', '×', '－', '個人サイトには不要', ''),
('コンプライアンスとガバナンス', 'ライセンス管理', '○', '○', 'OSS ライセンス・依存関係管理', ''),
('コンプライアンスとガバナンス', '契約管理', '×', '－', '個人利用のため不要', '');

-- 8. DevOpsとSRE実践
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('DevOpsとSRE実践', 'DevOps文化醸成', '△', '○', '個人開発での自動化・効率化', ''),
('DevOpsとSRE実践', 'クロスファンクショナルチーム', '×', '－', '個人開発のため不要', ''),
('DevOpsとSRE実践', '責任共有モデル', '×', '－', '個人責任で完結', ''),
('DevOpsとSRE実践', '継続的改善', '○', '○', '定期的な技術・プロセス改善', ''),
('DevOpsとSRE実践', 'Infrastructure as Code', '○', '○', 'Docker + Vercel設定', ''),
('DevOpsとSRE実践', 'Configuration as Code', '○', '○', '設定ファイルのバージョン管理', ''),
('DevOpsとSRE実践', 'Policy as Code', '△', '○', 'ESLint・Prettier設定', ''),
('DevOpsとSRE実践', 'GitOps実践', '○', '○', 'Git-based deployment', ''),
('DevOpsとSRE実践', 'エラーバジェット', '×', '－', '個人サイトには過剰', ''),
('DevOpsとSRE実践', 'SLI/SLO/SLA管理', '×', '－', '個人サイトには過剰', ''),
('DevOpsとSRE実践', 'トイルの削減', '○', '○', '自動化・効率化の継続的実施', ''),
('DevOpsとSRE実践', 'オンコール体制', '×', '－', '個人運用のため不要', ''),
('DevOpsとSRE実践', 'メトリクスドリブン改善', '○', '○', 'パフォーマンス・エラー率監視', ''),
('DevOpsとSRE実践', 'A/Bテスト基盤', '×', '－', '個人サイトには過剰', ''),
('DevOpsとSRE実践', 'フィードバックループ', '○', '○', '問い合わせ・Analytics分析', ''),
('DevOpsとSRE実践', 'レトロスペクティブ', '△', '○', '個人での振り返り・改善', '');

-- 9. コスト管理と最適化
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('コスト管理と最適化', 'コスト配賦モデル', '×', '－', '個人プロジェクトには不要', ''),
('コスト管理と最適化', 'タグ戦略', '△', '○', 'リソース識別・分類', ''),
('コスト管理と最適化', '使用量レポート', '○', '○', 'Vercel usage dashboard', ''),
('コスト管理と最適化', '予算アラート', '○', '○', '使用量上限・アラート設定', ''),
('コスト管理と最適化', 'リソース適正サイジング', '○', '○', 'Vercel Functions最適化', ''),
('コスト管理と最適化', '予約インスタンス', '×', '－', 'サーバーレスのため不要', ''),
('コスト管理と最適化', 'スポットインスタンス', '×', '－', 'サーバーレスのため不要', ''),
('コスト管理と最適化', '不要リソース削除', '○', '○', '定期的なクリーンアップ', ''),
('コスト管理と最適化', 'コスト文化醸成', '△', '○', '個人での効率的リソース利用', ''),
('コスト管理と最適化', 'ショーバック/チャージバック', '×', '－', '個人プロジェクトには不要', ''),
('コスト管理と最適化', 'コスト最適化自動化', '○', '○', '不要リソース自動削除', ''),
('コスト管理と最適化', 'ベンダー交渉', '×', '－', '個人利用のため不要', '');

-- 10. 将来への備え
INSERT INTO system_construction_matrix (category, item, necessity, completion, remarks, consideration) VALUES
('将来への備え', 'AI/ML統合準備', '△', '進行中', '将来的なChatGPT API統合検討', ''),
('将来への備え', 'エッジコンピューティング', '○', '○', 'Vercel Edge Functions活用', ''),
('将来への備え', '量子コンピューティング', '×', '－', '個人サイトには不適用', ''),
('将来への備え', 'Web3/ブロックチェーン', '×', '－', '現在のスコープ外', ''),
('将来への備え', 'グリーンIT実践', '○', '○', '効率的なコード・サーバーレス活用', ''),
('将来への備え', 'カーボンフットプリント', '△', '○', 'Vercel Green Energy使用', ''),
('将来への備え', 'エネルギー効率最適化', '○', '○', 'コード最適化・キャッシュ活用', ''),
('将来への備え', 'サステナブルな設計', '○', '○', '長期保守性・拡張性確保', ''),
('将来への備え', '実験環境整備', '○', '○', '開発・ステージング環境', ''),
('将来への備え', 'イノベーションラボ', '×', '－', '個人プロジェクトには不要', ''),
('将来への備え', 'ハッカソン文化', '×', '－', '個人開発のため不要', ''),
('将来への備え', '技術コミュニティ参加', '○', '○', 'OSS貢献・技術発信', '');
